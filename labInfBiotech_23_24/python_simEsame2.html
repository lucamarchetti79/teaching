<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lezione 11.2 - Python: Simulazione esame 2 (19/6/2020) &mdash; Laboratorio di Informatica a.a. 2023/2024 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=a04c98ff"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Lezione 11.3 - Python: Simulazione esame 3 (13/2/2020)" href="python_simEsame3.html" />
    <link rel="prev" title="Lezione 11.1 - Python: Simulazione esame (24/7/2020)" href="python_simEsame1.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Laboratorio di Informatica
          </a>
              <div class="version">
                a.a. 2023/2024
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="shell_basics.html">Lezione 1 - Shell: Fondamentali</a></li>
<li class="toctree-l1"><a class="reference internal" href="shell_basics_sol.html">Lezione 1 - Soluzioni</a></li>
<li class="toctree-l1"><a class="reference internal" href="shell_commands1.html">Lezione 2.1 - Shell: Avanzate</a></li>
<li class="toctree-l1"><a class="reference internal" href="shell_commands1_sol.html">Lezione 2.1 - Soluzioni</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_basics.html">Lezione 2.2 - Python: Fondamentali</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_basics_sol.html">Lezione 2.2 - Soluzioni</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_moduli.html">Lezione 3.1 - Python: Moduli</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_moduli_sol.html">Lezione 3.1 - Soluzioni</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_numbers.html">Lezione 3.2 - Python: Numeri</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_numbers_sol.html">Lezione 3.2 - Soluzioni</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_strings.html">Lezione 4 - Python: Stringhe</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_strings_sol.html">Lezione 4 - Soluzioni</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_lists.html">Lezione 5 - Python: Liste</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_lists_sol.html">Lezione 5 - Soluzioni</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_lists_adv.html">Lezione 6.1 - Python: Liste, concetti avanzati</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_lists_adv_sol.html">Lezione 6.1 - Soluzioni</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_tuples.html">Lezione 6.2 - Python: Tuple</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_tuples_sol.html">Lezione 6.2 - Soluzioni</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_test.html">Esercitazione aggiuntiva</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_test_sol.html">Esercitazione aggiuntiva - Soluzioni</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_dictionaries.html">Lezione 7.1 - Python: Dizionari</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_dictionaries_sol.html">Lezione 7.1 - Soluzioni</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_sets.html">Lezione 7.2 - Python: Sets</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_sets_sol.html">Lezione 7.2 - Soluzioni</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_io.html">Lezione 7.3 - Python: Input-Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_io_sol.html">Lezione 7.3 - Soluzioni</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_complex_statements_1.html">Lezione 8 - Python: Statement Complessi (1)</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_complex_statements_1_sol.html">Lezione 8 - Soluzioni</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_complex_statements_2.html">Lezione 9 - Python: Statement Complessi (2)</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_complex_statements_2_sol.html">Lezione 9 - Soluzioni</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_functions.html">Lezione 10 - Python: Funzioni</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_functions_sol.html">Lezione 10 - Soluzioni</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_simEsame1.html">Lezione 11.1 - Python: Simulazione esame (24/7/2020)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Lezione 11.2 - Python: Simulazione esame 2 (19/6/2020)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#testo">TESTO</a></li>
<li class="toctree-l2"><a class="reference internal" href="#soluzione">Soluzione</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="python_simEsame3.html">Lezione 11.3 - Python: Simulazione esame 3 (13/2/2020)</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_simEsame4.html">Lezione 11.4 - Python: Simulazione esame 4 (20/1/2020)</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_simEsame5.html">Lezione 11.5 - Python: Simulazione esame 5 (11/09/2019)</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Laboratorio di Informatica</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Lezione 11.2 - Python: Simulazione esame 2 (19/6/2020)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/python_simEsame2.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="lezione-11-2-python-simulazione-esame-2-19-6-2020">
<h1>Lezione 11.2 - Python: Simulazione esame 2 (19/6/2020)<a class="headerlink" href="#lezione-11-2-python-simulazione-esame-2-19-6-2020" title="Link to this heading"></a></h1>
<p>Testo e soluzioni a cura di Andrea Passerini ed Antonio Longa, riviste da Luca Marchetti.</p>
<p><strong>NOTA 1:</strong> questi esercizi sono relativi alla seconda parte dell’esame, la parte che si svolgera’
al computer. Prima di questa ci sara’ una breve parte su foglio protocollo in cui vi sara’ chiesto
di correggere un programma python dato o di scrivere cosa stampa un programma Python fornito
nel testo dell’esercizio.</p>
<p><strong>NOTA 2:</strong> Per domande sulle soluzioni o sui testi, per favore riferitevi al tutore del corso:</p>
<p><strong>Domenico Stefani:</strong>  domenico dot stefani at unitn dot it</p>
<p><strong>IMPORTANTE:</strong> il testo completo di file da processare e le relative soluzioni sono
disponibili nel seguente archivio zip: <a class="reference download internal" download="" href="_downloads/34fc2514f6f9b64e2be0fa8f713db0b5/19_06_2020.zip"><code class="xref download docutils literal notranslate"><span class="pre">zip</span></code></a></p>
<section id="testo">
<h2>TESTO<a class="headerlink" href="#testo" title="Link to this heading"></a></h2>
<p>Scrivere un programma che</p>
<ol class="arabic simple">
<li><p>prenda in ingresso un file con annotazioni di score di artefatti in ecografie polmonari, fatte da più medici diversi.</p></li>
<li><p>calcoli per ogni video lo score con pi‘ănnotazioni (score di consenso)</p></li>
<li><p>restituisca per ogni score il numero di video annotati con quello score di consenso</p></li>
</ol>
<p><strong>ESEMPIO File in input</strong></p>
<p>video_scores.csv:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Video</span>       <span class="n">Score</span> <span class="n">M1</span>        <span class="n">Score</span> <span class="n">M2</span>        <span class="n">Score</span> <span class="n">M3</span>        <span class="n">Score</span> <span class="n">M4</span>        <span class="n">Score</span> <span class="n">M5</span>        <span class="n">Score</span> <span class="n">M6</span>
<span class="mi">1</span>           <span class="mi">2</span>               <span class="mi">1</span>               <span class="mi">2</span>               <span class="mi">3</span>               <span class="mi">3</span>               <span class="mi">2</span>
<span class="mi">2</span>           <span class="mi">1</span>               <span class="mi">2</span>               <span class="mi">1</span>               <span class="mi">1</span>               <span class="mi">1</span>               <span class="mi">2</span>
<span class="mi">3</span>           <span class="mi">3</span>               <span class="mi">3</span>               <span class="mi">3</span>               <span class="mi">3</span>               <span class="mi">3</span>               <span class="mi">1</span>
<span class="mi">4</span>           <span class="mi">3</span>               <span class="mi">3</span>               <span class="mi">3</span>               <span class="mi">3</span>               <span class="mi">3</span>               <span class="mi">3</span>
</pre></div>
</div>
<p><strong>ESEMPIO DI OUTPUT</strong></p>
<p>python majority.py:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Inserire</span> <span class="n">nome</span> <span class="n">file</span><span class="p">:</span> <span class="n">video_scores</span><span class="o">.</span><span class="n">csv</span>
<span class="n">Majority</span> <span class="n">score</span> <span class="n">counts</span>
<span class="mi">2</span> <span class="p">(</span><span class="mi">19</span><span class="p">)</span> <span class="mi">1</span> <span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="mi">0</span> <span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="mi">3</span> <span class="p">(</span><span class="mi">9</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>SUGGERIMENTI</strong></p>
<p>Si possono implementare 5 funzioni separate:</p>
<ol class="arabic simple">
<li><p>una che legga il file dati e restituisca per ogni video la lista di score, ignorando eventuali valori ’NC’ (non classificabile)</p></li>
<li><p>una che data una lista di score restituisca lo score più frequente</p></li>
<li><p>una che data le liste di score di tutti i video, calcoli per ciascuno lo score più frequente (usando la funzione precedente) e restituisca un dizionario di conteggi degli score più frequenti</p></li>
<li><p>una che stampi il dizionario di score e conteggi in ordine decrescente per conteggi.</p></li>
<li><p>una (o un main) che realizzi il programma richiesto usando le funzioni di cui sottostringa_piu_lunga</p></li>
</ol>
</section>
<section id="soluzione">
<h2>Soluzione<a class="headerlink" href="#soluzione" title="Link to this heading"></a></h2>
<p><strong>LEGGETE E RI LEGGETE la consegna per capire se è chiara</strong></p>
<p>iniziamo seguendo i suggerimenti:</p>
<p><strong>suggerimento 1</strong></p>
<blockquote>
<div><ol class="arabic simple">
<li><p>una che legga il file dati e restituisca per ogni video la lista di score, ignorando eventuali valori ’NC’ (non classificabile)</p></li>
</ol>
</div></blockquote>
<p><strong>SEMPLICE</strong>
lo abbiamo sempre fatto:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">load_scores</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">all_scores</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>               <span class="c1"># itero su ogni riga del file in input</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>      <span class="c1"># splitto la riga</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="p">[]</span>                <span class="c1"># uso un array temporaneo</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>      <span class="c1"># per ogni numero di artefatti in data (senza l&#39;elem in pos 0 [che è il numero video])</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="s2">&quot;NC&quot;</span><span class="p">:</span>       <span class="c1"># se i non è uguale a NC</span>
                <span class="n">tmp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>   <span class="c1"># lo converto in intero e lo appendo a tmp</span>
        <span class="n">all_scores</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">tmp</span><span class="p">))</span> <span class="c1">#aggiungo al risultato una tupla, contenente in pos 0 il numero del video</span>
                                         <span class="c1"># in pos 1 l&#39;array di score (senza NC)</span>

    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>               <span class="c1"># chiudo il file</span>
    <span class="k">return</span> <span class="n">all_scores</span>       <span class="c1"># ritorno il risultato</span>
</pre></div>
</div>
<p><strong>E’ corretto il codice che abbiamo scritto fino ad ora?</strong>
non lo so, ma posso verificarlo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">prova</span> <span class="o">=</span> <span class="n">load_scores</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">prova</span><span class="p">)</span>
</pre></div>
</div>
<p>si, funziona!</p>
<p><strong>suggerimento 2</strong></p>
<blockquote>
<div><ol class="arabic simple" start="2">
<li><p>una che data una lista di score restituisca lo score più frequente</p></li>
</ol>
</div></blockquote>
<p>mmmm, che cosa ci sta chiedendo?
data una lista di scores di un determinato video, resituisce lo score piu frequente.
Es data la lista:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Video</span> <span class="mi">1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
<p>la funzione ritorna 1, perche è lo score piu frequente.</p>
<p><strong>SEMPLICE</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">compute_majority_score</span><span class="p">(</span><span class="n">scores</span><span class="p">):</span>
     <span class="n">counts</span> <span class="o">=</span> <span class="p">{}</span>                     <span class="c1"># inizializzo un diz</span>
     <span class="k">for</span> <span class="n">score</span> <span class="ow">in</span> <span class="n">scores</span><span class="p">:</span>            <span class="c1"># itero su tutti gli scores</span>
             <span class="k">if</span> <span class="ow">not</span> <span class="n">score</span> <span class="ow">in</span> <span class="n">counts</span><span class="p">:</span>     <span class="c1"># se score non è in count</span>
                     <span class="n">counts</span><span class="p">[</span><span class="n">score</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>           <span class="c1"># lo aggiungo e ci mento valore 1</span>
             <span class="k">else</span><span class="p">:</span>                               <span class="c1"># altrimenti (se score è in count)</span>
                     <span class="n">counts</span><span class="p">[</span><span class="n">score</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>          <span class="c1"># incremento il valore di count</span>

     <span class="n">max_score</span><span class="o">=-</span><span class="mi">1</span>                            <span class="c1"># inizializzo max_score a -1</span>
     <span class="n">max_count</span><span class="o">=</span><span class="mi">0</span>                             <span class="c1"># inizializzo max_count a 0</span>
     <span class="k">for</span> <span class="p">(</span><span class="n">score</span><span class="p">,</span><span class="n">count</span><span class="p">)</span> <span class="ow">in</span> <span class="n">counts</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>    <span class="c1"># itero sul dizinario che ho creato sopra</span>
             <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="n">max_count</span><span class="p">:</span>               <span class="c1"># se il conteggio è maggiore di max_count</span>
                     <span class="n">max_score</span> <span class="o">=</span> <span class="n">score</span>               <span class="c1"># aggiorno max score</span>
                     <span class="n">max_count</span> <span class="o">=</span> <span class="n">count</span>               <span class="c1"># aggiorno max count</span>

     <span class="k">return</span> <span class="n">max_score</span>                        <span class="c1"># ritorno il valore</span>
</pre></div>
</div>
<p><strong>E’ corretto il codice che abbiamo scritto fino ad ora?</strong>
non lo so, ma posso verificarlo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">file_name</span> <span class="o">=</span> <span class="s2">&quot;video_scores.csv&quot;</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">load_scores</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">compute_majority_score</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</pre></div>
</div>
<p>si, funziona!</p>
<p><strong>suggerimento 3</strong></p>
<blockquote>
<div><ol class="arabic simple" start="3">
<li><p>una che data le liste di score di tutti i video, calcoli per ciascuno lo score più frequente (usando la funzione precedente) e restituisca un dizionario di conteggi degli score più frequenti</p></li>
</ol>
</div></blockquote>
<p>mmmm, che cosa ci sta chiedendo?
ci chiede di calcolare un diz, che abbia come chiave il numero di scores piu frequente di ogni video, e come valore le volte che compare.
Es supponiamo di avere queste liste:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Video</span> <span class="mi">1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="n">Video</span> <span class="mi">2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="n">Video</span> <span class="mi">3</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
<span class="n">Video</span> <span class="mi">4</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<p>Lo score piu frequente è:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">score</span> <span class="n">piu</span> <span class="n">freq</span> <span class="n">di</span> <span class="n">video</span> <span class="mi">1</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">score</span> <span class="n">piu</span> <span class="n">freq</span> <span class="n">di</span> <span class="n">video</span> <span class="mi">2</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">score</span> <span class="n">piu</span> <span class="n">freq</span> <span class="n">di</span> <span class="n">video</span> <span class="mi">3</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">score</span> <span class="n">piu</span> <span class="n">freq</span> <span class="n">di</span> <span class="n">video</span> <span class="mi">4</span> <span class="o">=</span> <span class="mi">3</span>
</pre></div>
</div>
<p>il dizionario in output è il seguente:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">diz</span> <span class="o">=</span> <span class="p">{</span>
    <span class="mi">2</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="mi">3</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="mi">1</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>Ora che abbiamo capito la consegna, scrivere il codice è easy :)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">compute_majority_counts</span><span class="p">(</span><span class="n">all_scores</span><span class="p">):</span>
    <span class="n">majority_counts</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">video</span><span class="p">,</span><span class="n">scores</span><span class="p">)</span> <span class="ow">in</span> <span class="n">all_scores</span><span class="p">:</span>
        <span class="n">majority_score</span> <span class="o">=</span> <span class="n">compute_majority_score</span><span class="p">(</span><span class="n">scores</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">majority_score</span> <span class="ow">in</span> <span class="n">majority_counts</span><span class="p">:</span>
            <span class="n">majority_counts</span><span class="p">[</span><span class="n">majority_score</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">majority_counts</span><span class="p">[</span><span class="n">majority_score</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">majority_counts</span>
</pre></div>
</div>
<p><strong>E’ corretto il codice che abbiamo scritto fino ad ora?</strong>
non lo so, ma posso verificarlo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;video_scores.csv&quot;</span>
<span class="n">all_scores</span> <span class="o">=</span> <span class="n">load_scores</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="n">majority_counts</span> <span class="o">=</span> <span class="n">compute_majority_counts</span><span class="p">(</span><span class="n">all_scores</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">majority_counts</span><span class="p">)</span>
</pre></div>
</div>
<p>si, funziona!</p>
<p><strong>suggerimento 4</strong></p>
<blockquote>
<div><ol class="arabic simple" start="4">
<li><p>una che stampi il dizionario di score e conteggi in ordine decrescente per conteggi.</p></li>
</ol>
</div></blockquote>
<p>semplice:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">print_majority_counts</span><span class="p">(</span><span class="n">majority_counts</span><span class="p">):</span>
    <span class="n">score_list</span> <span class="o">=</span> <span class="p">[(</span><span class="n">count</span><span class="p">,</span><span class="n">score</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="n">score</span><span class="p">,</span><span class="n">count</span><span class="p">)</span> <span class="ow">in</span> <span class="n">majority_counts</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
    <span class="n">score_list</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Majority score counts&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2"> (</span><span class="si">%d</span><span class="s2">)&quot;</span> <span class="o">%</span><span class="p">(</span><span class="n">score</span><span class="p">,</span><span class="n">count</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="n">count</span><span class="p">,</span><span class="n">score</span><span class="p">)</span> <span class="ow">in</span> <span class="n">score_list</span><span class="p">]))</span>
</pre></div>
</div>
<p><strong>suggerimento 5</strong></p>
<blockquote>
<div><ol class="arabic simple" start="5">
<li><p>una (o un main) che realizzi il programma richiesto usando le funzioni di cui sopra</p></li>
</ol>
</div></blockquote>
<p>semplice ci chiede di mettere tutto insieme:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">load_scores</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">all_scores</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
        <span class="n">all_scores</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">],[</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="s1">&#39;NC&#39;</span><span class="p">]))</span>
    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">all_scores</span>

<span class="k">def</span> <span class="nf">compute_majority_score</span><span class="p">(</span><span class="n">scores</span><span class="p">):</span>
    <span class="n">counts</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">score</span> <span class="ow">in</span> <span class="n">scores</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">score</span> <span class="ow">in</span> <span class="n">counts</span><span class="p">:</span>
            <span class="n">counts</span><span class="p">[</span><span class="n">score</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">counts</span><span class="p">[</span><span class="n">score</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="n">max_score</span><span class="o">=-</span><span class="mi">1</span>
    <span class="n">max_count</span><span class="o">=</span><span class="mi">0</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">score</span><span class="p">,</span><span class="n">count</span><span class="p">)</span> <span class="ow">in</span> <span class="n">counts</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="n">max_count</span><span class="p">:</span>
            <span class="n">max_score</span> <span class="o">=</span> <span class="n">score</span>
            <span class="n">max_count</span> <span class="o">=</span> <span class="n">count</span>

    <span class="k">return</span> <span class="n">max_score</span>

<span class="k">def</span> <span class="nf">compute_majority_counts</span><span class="p">(</span><span class="n">all_scores</span><span class="p">):</span>
    <span class="n">majority_counts</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">video</span><span class="p">,</span><span class="n">scores</span><span class="p">)</span> <span class="ow">in</span> <span class="n">all_scores</span><span class="p">:</span>
        <span class="n">majority_score</span> <span class="o">=</span> <span class="n">compute_majority_score</span><span class="p">(</span><span class="n">scores</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">majority_score</span> <span class="ow">in</span> <span class="n">majority_counts</span><span class="p">:</span>
            <span class="n">majority_counts</span><span class="p">[</span><span class="n">majority_score</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">majority_counts</span><span class="p">[</span><span class="n">majority_score</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">majority_counts</span>

<span class="k">def</span> <span class="nf">print_majority_counts</span><span class="p">(</span><span class="n">majority_counts</span><span class="p">):</span>
    <span class="n">score_list</span> <span class="o">=</span> <span class="p">[(</span><span class="n">count</span><span class="p">,</span><span class="n">score</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="n">score</span><span class="p">,</span><span class="n">count</span><span class="p">)</span> <span class="ow">in</span> <span class="n">majority_counts</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
    <span class="n">score_list</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Majority score counts&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2"> (</span><span class="si">%d</span><span class="s2">)&quot;</span> <span class="o">%</span><span class="p">(</span><span class="n">score</span><span class="p">,</span><span class="n">count</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="n">count</span><span class="p">,</span><span class="n">score</span><span class="p">)</span> <span class="ow">in</span> <span class="n">score_list</span><span class="p">]))</span>


<span class="n">filename</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Inserire nome file: &quot;</span><span class="p">)</span>
<span class="n">all_scores</span> <span class="o">=</span> <span class="n">load_scores</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="n">majority_counts</span> <span class="o">=</span> <span class="n">compute_majority_counts</span><span class="p">(</span><span class="n">all_scores</span><span class="p">)</span>
<span class="n">print_majority_counts</span><span class="p">(</span><span class="n">majority_counts</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="python_simEsame1.html" class="btn btn-neutral float-left" title="Lezione 11.1 - Python: Simulazione esame (24/7/2020)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="python_simEsame3.html" class="btn btn-neutral float-right" title="Lezione 11.3 - Python: Simulazione esame 3 (13/2/2020)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Luca Marchetti.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>